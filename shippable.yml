# Language setting
language: node_js

env:
  global:
    - FOO=FUBU
    - FO1=BUBU
    - BOO=GUBU
    
build:
  pre_ci:
    - echo "Good morning 2"
    - echo "testing"

  ci:
    - ps -eax
    - ls -al

  post_ci:
    - echo "post ci stage. Finished ! yo"
    #- docker build -t="480971114143.dkr.ecr.us-east-1.amazonaws.com/sample_node:$BRANCH.$BUILD_NUMBER" .
    #- docker push 480971114143.dkr.ecr.us-east-1.amazonaws.com/sample_node:$BRANCH.$BUILD_NUMBER
    # - docker build -t="quay.io/shippablequay/sample_node_01:$BRANCH.$BUILD_NUMBER" .
    # - docker push quay.io/shippablequay/sample_node_01:$BRANCH.$BUILD_NUMBER
    # - pip install awsebcli
    
integrations:
  deploy:
    # - integrationName: "Vishnu's AWS"
    #   type: aws
    #   target: eb_docker
    #   application_name: "vb-docker-app"
    #   env_name: localhost
    #   bucket_name: "elasticbeanstalk-us-west-2-480971114143"
    #   region: "us-west-2"
    #   image_name: "480971114143.dkr.ecr.us-east-1.amazonaws.com/sample_node:$BRANCH.$BUILD_NUMBER"
    
    - integrationName: "Vishnu's AWS"
      type: aws
      target: eb_docker
      application_name: "vb-docker-app"
      env_name: gcr-env
      bucket_name: "elasticbeanstalk-us-west-2-480971114143"
      region: "us-west-2"
      image_name: "gcr.io/vidya-project/sample_node"
      image_tag: "eb-docker-all.125"
      docker_config: "credentials/$AWS_EB_APPLICATION_NAME.dockerconfig"

    - integrationName: "Vishnu's AWS"
      type: aws
      target: eb_docker
      application_name: "vb-docker-app"
      env_name: quay
      bucket_name: "elasticbeanstalk-us-west-2-480971114143"
      region: "us-west-2"
      image_name: "quay.io/shippablequay/sample_node_01"
      image_tag: "eb-docker-all.125"
      docker_config:"credentials/$AWS_EB_APPLICATION_NAME.dockerconfig"

  # hub:
  #   - integrationName: "Vishnu's ECR"
  #     type: ecr
  #   - integrationName: "Vishnu's Quay"
  #     type: quay.io

# Language setting
language: node_js

env:
  global:
    - FOO=FUBU
    - FO1=BUBU
    - BOO=GUBU
    
build:
  pre_ci:
    - echo "Good morning 2"
    - echo "testing"

  ci:
    - ps -eax
    - ls -al

  post_ci:
    - echo "post ci stage. Finished ! yo"
    - docker build -t="scriptnull/vb-docker-app-img:$BRANCH.$BUILD_NUMBER" .
    - docker push scriptnull/vb-docker-app-img:$BRANCH.$BUILD_NUMBER
    # - pip install awsebcli

integrations:
  deploy:
    - integrationName: "Vishnu's AWS"
      type: aws
      target: ebs_docker
      application_name: "vb-docker-app"
      env_name: localhost
      bucket_name: "elasticbeanstalk-us-west-2-480971114143"
      region: "us-west-2"
      image_name: "scriptnull/vb-docker-app-img:$BRANCH.$BUILD_NUMBER"
  hub:
    - integrationName: "Vishnu's Docker"
      type: docker
